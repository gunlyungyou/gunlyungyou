---
layout: single
title:  "Return Prediction Using Machine Learning"
categories:
  - Classification
toc: true
toc_sticky: true
toc_label: "Contents"
excerpt: "서비스 이탈자들의 복귀 확률을 예측하고 이를 마케팅에 활용하는 프로젝트에 대한 소개 페이지 입니다."
header:
  overlay_image: /assets/images/return.jpg
  overlay_filter: 0.5 # same as adding an opacity of 0.5 to a black background
  caption: "Photo credit: [**Unsplash**](https://unsplash.com)"
  # actions:
  #   - label: "More Info"
  #     url: "https://unsplash.com"
---

# 이탈 유저들에 대한 서비스 복귀 예측 모델링

## Concept Summary

![return_explaination](/assets/images/return_exp.jpg)

기존에 서비스 이탈자 전체에게 마케팅을 진행하는 것보다 더 효율적인 마케팅을 진행하기 위해 **전체 이탈자 중에서 마케팅 여부에 관계없이 복귀할 유저와 복귀를 하지 않을 유저를 선별하여 제외한다면 적은 비용으로 동일한 효과를 얻을 수 있지 않을까?** 라는 아이디어를 바탕으로 해당 프로젝트를 시작하게 되었습니다.

이를 위해서는 각 서비스 이탈자들의 복귀 확률을 계산해야 했으며, 복귀/미복귀를 label로 한 binary classification 문제로 접근하기로 결정하였습니다.

대상 서비스는 당시 마케팅 예정에 있던 RPG 서비스 중 하나를 선택하였으며 마케팅 시작일 기준 1년 이내 이탈자들의 복귀 확률을 산출하였습니다.

## Data 

 데이터는 마케팅 시작일 기준 1년 동안의 데이터를 활용했으며 이용한 독립 변수 목록은 아래와 같습니다. 데이터는 zeppelin에서 pyspark문법과 SQL을 활용하여 불러왔습니다.

 * 과금액, 과금 횟수 등의 과금 관련 변수 7종
 * 접속 시간, 접속 횟수 등의 접속 관련 변수 11종
 * 캐릭터 개수, max 캐릭터 레벨 등 캐릭터 관련 변수 6종
 * 보스 몬스터 킬 수, 창고에 아이템 넣음 등의 인게임 변수 17종

 종속 변수인 복귀/미복귀는 이탈일 기준 현재 서비스를 이용하고 있는 유저는 복귀, 그렇지 않고 아직까지 이탈 중인 유저를 미복귀로 지정하였습니다. 

 ## Data Preprocessing

 ### Class Imbalancing

 해당 산업에서 빈번하게 마주치는 문제 중 하나입니다. 보통 이탈 유저들의 복귀는 x% 수준으로 상당히 낮습니다. 서비스마다 다르지만 큰 차이는 보이지 않습니다. 이번 프로젝트에서 선정한 서비스는 다행히 상대적으로 높은 수준의 복귀율을 보이고 있지만 여전히 종속 변수에 대한 class 불균형 문제를 갖고 있었습니다. 

 (class imabalance 실제 사진?)

 해당 프로젝트에서 under sampling, over sampling, SMOTE 등의 방법을 적용했지만 f1 score 기준 개선 비율은 약 5% 내외였습니다. 기존에 주로 이용해오던 방법들은 큰 효과를 거두지 못했고 해당 부분만을 주제로 따로 연구가 필요하다는 결론을 내렸습니다.

 ### Correlation

 모델을 크게 두 가지의 관점에서 만들었는데, 첫 번째는 모델에 대한 해석이 필요하지 않는 즉, **예측 확률값만이 필요**한 경우와 두 번째는 복귀에 유의미한 영향을 미치는 요인이 무엇인지 **해석이 필요**한 경우입니다. 





